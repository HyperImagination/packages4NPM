{"version":3,"file":"vue-messagebox-plugin.es.js","sources":["../src/message-box.vue","../src/index.js"],"sourcesContent":["<template>\n  <div ref=\"mask\" class=\"sh-mask\">\n    <div ref=\"container\" class=\"sh-container\">\n      <div class=\"sh-header\">{{ title }}</div>\n      <div class=\"sh-content\">{{ message }}</div>\n      <div class=\"sh-footer\">\n        <div v-if=\"showCancelButton\" @click=\"clickHandler.cancel\" style=\"color: #717171;\" class=\"sh-button\">{{ cancelButtonText }}</div>\n        <div v-if=\"showConfirmButton\" @click=\"clickHandler.confirm\" class=\"sh-button\">{{ confirmButtonText }}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        clickHandler: {\n          cancel() {},\n          confirm() {}\n        },\n        title: '',\n        message: '',\n        showConfirmButton: true, // 是否显示确认按钮\n        showCancelButton: false, // 是否显示取消按钮\n        confirmButtonText: '', // 确认按钮的文本\n        cancelButtonText: '' // 取消按钮的文本\n      };\n    }\n  };\n\n</script>\n\n<style>\n  .sh-mask {\n    position: fixed;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    background-color: rgba(0, 0, 0, .3);\n    opacity: 0;\n    transform: translate3d(0, -100%, 0);\n    z-index: 9999;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .sh-container {\n    width: 80%;\n    min-height: 15%;\n    max-height: 80%;\n    border: 1px solid #ddd;\n    background-color: #fff;\n    border-radius: 5px;\n    display: flex;\n    flex-direction: column;\n    text-align: center;\n  }\n  .sh-header {\n    height: 3rem;\n    font-size: 18px;\n    line-height: 3rem;\n    font-weight: bold;\n  }\n  .sh-content {\n    min-height: 3rem;\n    flex: 1;\n    padding: .3rem;\n    color: #999;\n    overflow: auto;\n  }\n  .sh-footer {\n    height: 2.5rem;\n    line-height: 2.5rem;\n    border-top: 1px solid #999;\n    display: flex;\n  }\n  .sh-button {\n    width: 1px;\n    flex: 1;\n    text-align: center;\n    color: #0af;\n  }\n  .sh-button:nth-child(2n) {\n    border-left: 1px solid #999;\n  }\n  .sh-button:active{\n    opacity: .7;\n  }\n</style>","import messageBox from './message-box.vue';\n// 遮罩动画\nconst fadeIn = {\n    transform: 'translate3d(0, 0, 0)',\n    opacity: 0\n  },\n  fadeOut = {\n    transform: 'translate3d(0, 0, 0)',\n    opacity: 1\n  },\n  // 对话框进入动画\n  scaleInStart = {\n    transform: 'translate3d(0, 0, 0) scale(1.5)',\n    opacity: 0\n  },\n  scaleInEnd = {\n    transform: 'translate3d(0, 0, 0) scale(1)',\n    opacity: 1\n  },\n  // 对话框退出动画\n  scaleOutStart = {\n    transform: 'translate3d(0, 0, 0) scale(1)',\n    opacity: 1\n  },\n  scaleOutEnd = {\n    transform: 'translate3d(0, 0, 0) scale(.5)',\n    opacity: 0\n  },\n  // 遮罩层动画配置\n  maskInConfig = {\n    duration: 400,\n    delay: 100,\n    easing: 'cubic-bezier(.22,.67,.52,.92)',\n    fill: 'forwards'\n  },\n  maskOutConfig = {\n    duration: 400,\n    delay: 100,\n    easing: 'cubic-bezier(.22,.67,.52,.92)',\n    fill: 'backwards'\n  },\n  // 对话框动画配置\n  containerInConfig = {\n    duration: 500,\n    easing: 'cubic-bezier(.22,.67,.52,.92)',\n    fill: 'forwards'\n  },\n  containerOutConfig = {\n    duration: 500,\n    easing: 'cubic-bezier(.22,.67,.52,.92)',\n    fill: 'backwards'\n  },\n  tasks = [];\nlet isShow = false, maskAnimate = null, containerAnimate = null;\nexport default {\n  install(Vue) {\n    // 初始化组件\n    const MessageBox = Vue.extend(messageBox);\n    const component = new MessageBox().$mount();\n    document.getElementById('app').appendChild(component.$el);\n    // 加入任务链\n    const pushTask = (options = {}) => {\n      options.title = options.title || '提示';\n      options.message = options.message || '信息';\n      options.showConfirmButton = typeof options.showConfirmButton === 'undefined' ? true : options.showConfirmButton;\n      options.showCancelButton = typeof options.showCancelButton === 'undefined' ? false : options.showCancelButton;\n      options.confirmButtonText = options.confirmButtonText || '确定';\n      options.cancelButtonText = options.cancelButtonText || '取消';\n      options.clickHandler = {};\n      return new Promise((resolve, reject) => {\n        options.clickHandler.confirm = () => {\n          hide();\n          resolve();\n        };\n        options.clickHandler.cancel = () => {\n          hide();\n          reject('cancel');\n        };\n        tasks.push(options);\n        Vue.nextTick()\n        .then(() => {\n          showNext();\n        });\n      });\n    };\n    // 执行一个任务\n    const show = item => {\n      isShow = true;\n      Object.keys(item).forEach(key => component[key] = item[key]);\n      maskAnimate = component.$refs.mask.animate([fadeIn, fadeOut], maskInConfig);\n      containerAnimate = component.$refs.container.animate([scaleInStart, scaleInEnd], containerInConfig);\n    };\n    // 执行下一个\n    const showNext = () => {\n      if (isShow) return;\n      show(tasks[0]);\n    };\n    // 销毁一个任务\n    const hide = () => {\n      setTimeout(() => {\n        // 清除之前的动画状态\n        maskAnimate && maskAnimate.cancel();\n        containerAnimate && containerAnimate.cancel();\n        maskAnimate = component.$refs.mask.animate([fadeOut, fadeIn], maskOutConfig);\n        containerAnimate = component.$refs.container.animate([scaleOutStart, scaleOutEnd], containerOutConfig);\n        // 播放完毕触发\n        containerAnimate.onfinish = () => {\n          // 移除第一个\n          tasks.shift();\n          isShow = false;\n          tasks.length >= 1 && showNext();\n        };\n      }, 100);\n    };\n    Vue.prototype.$messagebox = pushTask;\n  }\n};"],"names":[],"mappings":"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"}